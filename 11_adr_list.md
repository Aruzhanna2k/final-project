# Architectural Decision Records (ADR)

> Ниже представлен список архитектурных решений, принятых в рамках реализации продукта.

1. **Выбор архитектурного стиля: модульный монолит с DDD**
   - Решение о построении системы в виде модульного монолита с чётким разделением доменов по принципам Domain-Driven Design (DDD).

2. **Метод авторизации: OAuth2 + JWT**
   - Принято решение использовать OAuth2 как механизм авторизации, с JWT в качестве формата токенов.

3. **Тип API: REST**
   - Выбран REST как основной стиль взаимодействия между клиентом и сервером.

4. **Хранение данных: реляционная СУБД (PostgreSQL)**
   - Для основной бизнес-логики используется реляционная база данных с поддержкой транзакций и сложных запросов.

5. **Интеграции с устройствами и платформами: асинхронный подход через брокер сообщений (например, Kafka)**
   - Для устойчивости и масштабируемости выбрано асинхронное взаимодействие с внешними устройствами.

6. **Уведомления и события: использование очередей (Kafka)**
   - Все события (например, успехи пользователей) публикуются через очередь сообщений.

7. **Геймификация: выделенный домен и API**
   - Принято решение реализовать геймификацию как отдельный модуль с независимыми правилами и механиками.

8. **Аутентификация пользователей: хранение в собственном auth-сервисе**
   - Принято решение не делегировать аутентификацию внешним провайдерам.

9. **Кэширование: Redis**
   - Используется Redis для ускорения доступа к данным пользователя и метрик тренировок.

10. **Механизм логирования и наблюдаемости: OpenTelemetry + Prometheus + Grafana**
    - Выбран стек инструментов для сбора метрик, логов и трассировок.

11. **Мониторинг API-интеграций: Health-check + алерты**
    - Все внешние интеграции покрываются проверками здоровья и алертингом.

12. **Региональные промоакции: хранение в CMS**
    - Промоакции и контент управляются через отдельную систему управления контентом.

13. **Стратегия масштабирования: миграция модулей в микросервисы при необходимости**
    - Возможность постепенного выделения отдельных доменов в микросервисы при росте нагрузки.
