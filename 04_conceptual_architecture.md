# Концептуальная архитектура проекта

> Система построена по модульному принципу с разделением ответственности по основным бизнес-функциям. Взаимодействие осуществляется через клиентское приложение.

![Схема концептуальной архитектуры](images/conceptual_architecture.png)

## Клиентская часть

### Пользователь

Это конечный клиент. Взаимодействует с системной через мобильное приложение;

### Клиентское приложение

Основной интерфейс. Взаимодействует со всеми модулями системы (см. ниже)

## Архитектура

### Модуль Клиент

Модуль отвечает за профиль пользователя, его настройки, клиентские данные;

Включает в себя:
- сервис авторизации. Предназначен для регистрации и аутентификации.
- сервис профиля. Возможность управления своим профилем пользователем приложения. Хранит основную информацию о пользователе (имя/фамилия/возраст/страна/язык интерфейса).
- сервис инвентаря. Используется для рекомендаций и анализа, позволяет добавлять, редактировать и удалять спортивный инвентарь.

Хранение данных
PostgreSQL, реляционная база данных. 

### Модуль Тренировка

Модуль управляет сессиями тренировок. Предназначен для хранения результатов, маршруты, времени и прогресса; В дальнейшем в данном же модуле будет реализован анализ тренировок, который будет строиться на основании данных, полученных по итогам тренировки.

Включает в себя:
- сервис анализа и рекомендаций на основе истории тренировок формирует аналитику, прогресс и рекомендации;
- сервис планирования тренировок. Позволит формировать индивидуальные планы тренировок на основе целей, состояния здоровья, графика.

Хранение данных
PostgreSQL, реляционная база данных. Так как большинство данных в модуле это сессии, параметры. Они имеют явные связи и хорошо ложатся в реляционную модель.

### Модуль Устройства

Модуль предназначен для управления пользовательскими устройствами, подключаемыми к приложению с целью сбора физиологических и тренировочных данных (пульс, шаги, GPS, калории и пр.). Является посредником между сторонними девайсами и внутренними модулями системы. Отвечает за регистрацию, настройку, авторизацию, получение и преобразование данных.

Включает в себя:
- сервис реального времени, используется для обрабатотки потока событий во время активной тренировки. Может использовать в качестве технологии WebSocket или gRPC;
- сервис агрегации и трансформации данных. Принимает поток данных от устройств, нормализует и сохраняет в формате, совместимом с модулем Тренировка. 

Хранение данных
PostgreSQL, реляционная база данных. Так как данные об устройствах имеют четкую структуру и связи.

### Модуль Социальные функции

Модуль социальные функции один из самых важных компонентов системы. Предназначен для формирования групп по интересам и взаимодействия между участниками.

Включает в себя:
- сервис групп. Предназначен для формирования групп пользователей по видам спорта, целям и геолокации.
- сервис чата. Предназначен для обмена текстовыми сообщениями между участниками группы.
- сервис достижений. Предназначен для отправки уведомлений участникам группы при достижениях.

Хранение данных
PostgreSQL, для хранения информации о группах;
Redis или Kafka, для обеспечения доставки сообщений в чате и обновлений в реальном времени.


### Модуль Геймификация

Модуль реализует механизмы челленджей, достижений и прогресса для увеличения вовлеченности. 

Включает в себя:
- сервис достижений. Позволяет назначать достижения за активность пользователей;
- сервис челленджей. Формирует индивидуальные и командные челленджи;
- сервис лидербордов. Предназначен для отображения самых активных пользователей по различным метрикам;
- сервис управления контентом. Позволяет создавать, редактировать челленджи, настраивать достижения. 

Хранение данных

PostgreSQL, для хранения достижений, челленджей и лидербордов.

### Модуль Промоакции

Отвечает за отображение персонализированных предложений и новостей.

Включает в себя:
- сервис новостей. Обеспечивает публикацию новостей, отображение ленты;
- сервис промоакций. Позволяет управлять персонализированными предложениями от бренда, акции по локации пользователя, типам тренировок;
- сервис управления контентом. Позволяет публиколвать, редактировать и удалять новости, промоакции контент-менеджером. 

Хранение данных

PostgreSQL, для хранения метаинформации: заголовки, описания, даты публикации, настройки отображения;
S3, для хранения изображений.
